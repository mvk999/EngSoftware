@startuml
title Diagrama de Pacotes - EngSoftware (Frontend + Backend)

skinparam packageStyle rectangle
skinparam shadowing false
scale max 1920x1080
' ===========================
' BACKEND (estilo com.br...)
' ===========================
    package "EngSoftaware" {
      package "backend" as PBackend {

        package "controller" as PController {
          class AuthController
          class CategoriaController
          class ProdutoController
          class CarrinhoController
          class ClienteController
          class EnderecoController
          class PedidoController
        }

        package "service" as PService {
          class AuthService
          class CategoriaService
          class ProdutoService
          class CarrinhoService
          class ClienteService
          class EnderecoService
          class PedidoService
        }

        package "repository" as PRepository {
          class AuthRepository
          class CategoriaRepository
          class ProdutoRepository
          class CarrinhoRepository
          class ClienteRepository
          class EnderecoRepository
          class PedidoRepository
          class Bd
        }

        package "routes" as PRoutes {
          class IndexRoute
          class AuthRoute
          class CategoriaRoute
          class ProdutoRoute
          class CarrinhoRoute
          class ClienteRoute
          class EnderecoRoute
          class PedidoRoute
        }

        package "middlewares" as PMiddlewares {
          class AuthMiddleware
          class AdminMiddleware
          class OwnerMiddleware
          class UploadMiddleware
          class ErrorBoundary
        }

        package "utils" as PUtils {
          class JwtUtils
          class PasswordUtils
          class EmailUtils
          class ValidationUtils
          class SwaggerConfig
          class ErrorUtils
        }

        package "docs_backend" as PDocs {
          class OpenAPI_Json
          class Script_Schema_SQL
        }

        package "tests" as PTests {
          class ClienteServiceTests
          class ProdutoServiceTests
          class CategoriaServiceTests
        }
      }
    }

' ===========================
' FRONTEND (Cliente)
' ===========================
package "Frontend (Cliente)" as FFrontend {
  package "React SPA" as FReact {
    class App
    class Rotas
    class AuthUtil

    package "Telas" as FViews {
      class TelaLogin
      class TelaRegister
      class TelaEsqueceuSenha
      class TelaDashboard
      class TelaCarrinho
      class TelaAdminProdutos
      class TelaAdminPedidos
    }
  }
}

' ===========================
' DEPENDÊNCIAS (setas tracejadas)
' ===========================
FFrontend ..> PBackend : <<HTTP JSON>>\nconsome API

PController ..> PService : <<usa>>
PService ..> PRepository : <<usa>>
PRoutes ..> PController : <<encaminha>>
PController ..> PMiddlewares : <<valida>>
PService ..> PUtils : <<apoia>>
PDocs ..> PController : <<documenta>>
PTests ..> PService : <<testa>>

note right of PService
  Serviços concentram regra de negócio:
  - validações de RF/RN
  - orquestração entre repositórios e utils
end note

note right of FFrontend
  Telas React consomem a API via Axios/fetch
  e usam utils/auth.js para JWT.
end note

@enduml
